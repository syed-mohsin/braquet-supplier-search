<section class="container" ng-controller="ProjectsController" ng-init="(authentication.user.roles[0] === 'seller') ? find() : findMyProjects();">
    <div class="page-header">
        <h2>Projects</h2>
    </div>
    <div class="list-group">
        <div ng-repeat="project in projects" class="list-group-item">
            <a class="project-title" ui-sref="projects.view({projectId: project._id})">
                <!-- ng-show="authentication.user._id == project.user._id" -->
                <h4 class="list-group-item-heading" ng-bind="project.title"></h4>
            </a>
            <div class="list-detail">
                <h5 class="list-group-item-heading bid col-sm-6">Top Bid: <span ng-bind="(project.bids[0]) ? (project.bids[0].bid_price/100 | currency) + '/W from ' + project.bids[0].user.displayName : 'Currently No Bids!'"></span></h5>

                <h5 class="list-group-item-heading col-sm-6"><span class="bg-danger" countdown="" date="project.bid_deadline"></span> left (Ends: <span ng-bind="project.bid_deadline | date:'mediumDate'"></span>)</h5>
            </div>
            <div><a class="place-bid" ng-show="authentication.user.roles[0] === 'seller'" ui-sref="bids.create({projectId: project._id})">Place a Bid</a></div>

        </div>
    </div>
    <div class="alert alert-warning text-center" ng-if="authentication.user.roles[0] !== 'seller' && projects.$resolved && !projects.length">
        No projects yet, why don't you <a ui-sref="projects.create">create one</a>?
    </div>
    <div class="alert alert-warning text-center" ng-if="authentication.user.roles[0] === 'seller' && projects.$resolved && !projects.length">No projects to bid on!</div>
</section>